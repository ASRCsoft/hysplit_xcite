<html>
    <head>
	<title>HYSPLIT Viewer - xCITE Data Lab</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- leaflet stuff -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.1.0/dist/leaflet.css" integrity="sha512-wcw6ts8Anuw10Mzh9Ytw4pylW8+NAD4ch3lqm9lzAsTxg0GFeJgoAtxuCLREZSC5lUXdVyo/7yfsqFjQ4S+aKw==" crossorigin="">
	<script src="https://unpkg.com/leaflet@1.1.0/dist/leaflet.js" integrity="sha512-mNqn2Wg7tSToJhvHcqfzLMU6J4mkOImSPTxVZAdo+lcPlk+GhZmYgACEe0x35K7YzW1zJ7XyJV/TT1MrdXvMcA==" crossorigin=""></script>
	<!-- topojson stuff -->
	<script src="https://unpkg.com/topojson@3"></script>
	<!-- jquery stuff -->
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<!-- jquery ui stuff -->
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
	<!-- nice html labeled range slider -->
	<script src="js/jquery-ui-slider-pips.js"></script>
	<link rel="stylesheet" href="css/jquery-ui-slider-pips.css">
	<!-- extra stuff for timeslider -->
	<script src="https://cdn.rawgit.com/nezasa/iso8601-js-period/master/iso8601.min.js"></script>
	<link rel="stylesheet" href="css/leaflet.timedimension.control.css">
	<script src="js/timedimension.js"></script>
	<!-- a spinning wheel! -->
	<script src="js/spin.min.js"></script>
	<script src="js/leaflet.spin.min.js"></script>
	<!-- hysplit app files -->
	<script src="js/topojson.js"></script>
	<script src="js/layerArray.js"></script>
	<script src="js/hysplit.js"></script>
	<link rel="stylesheet" href="css/hysplit.css">

    </head>
    <body>
	<div id="map"></div>
	<script type="text/javascript">

	 /* useful global variables */
	 /* contour levels */
	 var levels = [-2, -1, 0, 1, 2, 3, 4, 5];
	 var d1;
	 $.get('/~xcite/hysplit_xcite/data/current_date.txt', function(data) {
	     var date_str = data;
	     var current_date = new Date();
	     current_date.setUTCFullYear(parseInt(date_str.substring(0, 4)));
	     current_date.setUTCMonth(parseInt(date_str.substring(4, 6)) - 1);
	     current_date.setUTCDate(parseInt(date_str.substring(6, 8)));
	     current_date.setUTCHours(parseInt(date_str.substring(8, 10)));
	     current_date.setUTCMinutes(0);
	     current_date.setUTCSeconds(0);
	     current_date.setUTCMilliseconds(0);
	     /* d1 = current_date;*/
	     $.getJSON('http://appsvr.asrc.cestm.albany.edu:5000/sites', function (sites) {
		 h1 = new Hysplit(sites, 'VOOR', true, current_date);
		 h1.initialize('map');
	     })
	 });
	</script>
    </body>
</html>
